# XcodeMigrate

Generate Bazel BUILD files from Xcode projects.

Long term plans:

- Generate [Buck2](https://github.com/facebookincubator/buck2) files
- Generate [Xcodegen](https://github.com/yonaskolb/XcodeGen) YAML files

This project is still in its early stages. It is not yet ready for production use.
If you have any questions or ideas, please feel free to [open a discussion](https://github.com/XcodeMigrate/XcodeMigrate/discussions/new).

## Why XcodeMigrate?

Over nearly ten years of my personal experience of Apple development, I strongly believe that developers should be able to keep focused on creative things rather than wasting time on compile time.

Bazel is designed for this purpose.

However, migrating existing (large) Xcode project to Bazel is not easy. It requires a lot of manual work.
`BazelMigrate` is created to help developers to migrate existing Xcode projects to Bazel with minimal manual work.

## Goals

- Ready to use out of the box, minimal configuration for most projects
- Full support [rules_xcodeproj](https://github.com/buildbuddy-io/rules_xcodeproj)
- Mixed language target (Objective-C/Swift) generation using [rules_ios](https://github.com/bazel-ios/rules_ios)

## Usage

```swift
mint install XcodeMigrate/XcodeMigrate@main
mint run xcode-migrate generate -p /path/to/your.xcodeproj
```

At current stage, `xcode-migrate` only supports generating Bazel files for iOS projects with Swift only frameworks.
You can try the testing project under [fixtures](https://github.com/XcodeMigrate/XcodeMigrate/tree/main/fixtures) directory. There is an example in [.github/workflows/swift.yml](https://github.com/XcodeMigrate/XcodeMigrate/blob/main/.github/workflows/swift.yml).

## Design

- End-to-end testing with Xcode projects generated by Tuist
- Decoupling Xcode project parser and generator

```
XcodeMigrate
 |--XcodeParser - Parsing layer
 |   `--XcodeProj
 |--XcodeAbstraction - Modeling layer (without any dependency to XcodeProj)
 |--BazelGenerator
 |--Common - Shared logic such as logging
 |--FoundationExtension - Extensions to Foundation
 `--TestSupport - Test helpers
 ```

 (Created by [Diagon](https://github.com/ArthurSonzogni/Diagon))

## Attributions

This tool is powered by:

- [XcodeProj](https://github.com/tuist/XcodeProj)
- [PathKit](https://github.com/kylef/PathKit)

Inspired by:

- [XCodeBazelize/Bazelize](https://github.com/XCodeBazelize/Bazelize)

## Contributing to XcodeMigrate

We'd love to accept your patches and contributions to this project.
Please feel free to open a pull request, an issue, or a discussion.

## Get Started

### Requirements

- Xcode 14.0 or later (Swift 5.7 or later)

#### Run the project

```shell
swift run XcodeMigrate
```

## License

XcodeMigrate is released under the MIT license. See LICENSE for details.
